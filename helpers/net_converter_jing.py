# MIT License
#
# Copyright (c) 2020 Aleksandr Zhuravlyov and Zakhar Lanets
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.


import sys
import os
import json
import random

from net_creator import create_net

current_path = os.path.dirname(os.path.abspath(__file__))
sys.path.append(os.path.join(current_path, '../../'))

# dims = [int(10), int(10)]
# length = 1.
# depth = 0.1
# width_range = [0.1, 0.3]
# throats_skip_freq = 3
#
# network_dict = create_net(dims, length, depth, width_range)

# be cautious, do not rewrite existing models
# json_file_name = '../inOut/models/model_chess.txt'
#
# with open(json_file_name, 'w') as f:
#     json.dump(network_dict, f, sort_keys=True, indent=4 * ' ', ensure_ascii=False)

# Viser 3x
pores_coordinates = {0: [213.20, 1613.91], 1: [174.23, 1266.09], 2: [831.33, 1663.04],
                     3: [772.10, 1216.96], 4: [1690.72, 1790.00], 5: [1690.72, 1090.00],
                     6: [2605.33, 1713.29], 7: [2544.10, 1166.71], 8: [132.51, 969.00],
                     9: [772.10, 766.96], 10: [1623.92, 493.73], 11: [2484.87, 720.62],
                     12: [132.51, 569.00], 13: [132.51, 1.00], 14: [686.29, 1.00],
                     15: [1623.92, 1.00], 16: [2462.86, 221.11], 17: [2462.86, 1.00],
                     18: [254.92, 1911.00], 19: [1028.78, 3150.00], 20: [1690.72, 2340.00],
                     21: [2807.10, 3150.00], 22: [268.97, 2360.78], 23: [302.37, 2658.91],
                     24: [317.71, 3150.00], 25: [1724.12, 2638.13], 26: [1796.00, 3150.00],
                     27: [1.00, 115.63], 28: [132.51, 142.09], 29: [1.00, 405.50],
                     30: [132.51, 419.86], 31: [1.00, 540.94], 32: [132.51, 543.78],
                     33: [1.00, 689.94], 34: [132.51, 692.78], 35: [1.00, 1562.12],
                     36: [208.58, 1572.67], 37: [1.00, 1843.12], 38: [247.15, 1855.63],
                     39: [1.00, 2020.02], 40: [258.33, 2020.02], 41: [1.00, 2121.02],
                     42: [261.48, 2121.02], 43: [1.00, 2413.02], 44: [274.82, 2413.02],
                     45: [1.00, 2608.02], 46: [296.67, 2608.02], 47: [132.51, 326.31],
                     48: [726.11, 356.47], 49: [132.51, 596.87], 50: [753.05, 596.87],
                     51: [132.51, 769.87], 52: [772.10, 769.87], 53: [132.51, 939.45],
                     54: [772.10, 952.44], 55: [157.35, 1145.87], 56: [772.10, 1145.87],
                     57: [190.68, 1412.87], 58: [798.11, 1412.87], 59: [201.76, 1511.77],
                     60: [813.47, 1528.51], 61: [227.66, 1716.87], 62: [838.48, 1716.87],
                     63: [252.70, 1895.16], 64: [864.38, 1911.90], 65: [257.85, 2004.87],
                     66: [876.72, 2004.87], 67: [296.38, 2605.49], 68: [947.19, 2535.60],
                     69: [304.63, 2731.14], 70: [982.82, 2803.94], 71: [690.98, 42.87],
                     72: [1623.92, 90.26], 73: [721.18, 312.44], 74: [1623.92, 287.74],
                     75: [752.09, 588.32], 76: [1631.47, 561.19], 77: [769.32, 742.13],
                     78: [1649.05, 718.05], 79: [772.10, 932.05], 80: [1670.27, 907.47],
                     81: [772.10, 1190.70], 82: [1690.72, 1375.49], 83: [858.56, 1868.07],
                     84: [1690.72, 1868.07], 85: [871.90, 1968.53], 86: [1690.72, 1993.78],
                     87: [924.29, 2363.07], 88: [1693.30, 2363.07], 89: [960.74, 2637.59],
                     90: [1729.52, 2676.59], 91: [977.00, 2760.07], 92: [1741.24, 2760.07],
                     93: [1623.92, 194.50], 94: [2462.86, 194.50], 95: [1623.92, 311.52],
                     96: [2467.64, 329.73], 97: [1623.92, 440.28], 98: [2476.59, 532.83],
                     99: [1640.70, 643.50], 100: [2481.47, 643.50], 101: [1690.72, 1470.50],
                     102: [2578.13, 1470.50], 103: [1690.72, 1609.06], 104: [2604.65, 1707.16],
                     105: [1690.72, 1833.08], 106: [2628.84, 1880.68], 107: [1690.72, 2076.87],
                     108: [2660.60, 2106.79], 109: [1690.72, 2211.50], 110: [2675.30, 2211.50],
                     111: [1730.53, 2683.81], 112: [2757.30, 2795.37], 113: [2462.86, 155.26],
                     114: [3150.00, 169.21], 115: [2467.89, 335.33], 116: [3150.00, 369.98],
                     117: [2489.01, 751.79], 118: [3150.00, 765.21], 119: [2501.69, 847.30],
                     120: [3150.00, 942.70], 121: [2532.92, 1082.54], 122: [3150.00, 1063.50],
                     123: [2562.92, 1334.69], 124: [3150.00, 1398.77], 125: [2629.77, 1887.26],
                     126: [3150.00, 1943.43], 127: [2655.25, 2068.71], 128: [3150.00, 2168.24],
                     129: [2695.31, 2353.98], 130: [3150.00, 2363.21], 131: [2714.33, 2489.37],
                     132: [3150.00, 2489.37], 133: [2745.94, 2714.47], 134: [3150.00, 2734.97]}

throats_pores = {0: [27, 28], 1: [29, 30], 2: [31, 32], 3: [33, 34], 4: [35, 36], 5: [37, 38],
                 6: [39, 40], 7: [41, 42], 8: [43, 44], 9: [45, 46], 10: [47, 48], 11: [49, 50],
                 12: [51, 52], 13: [53, 54], 14: [55, 56], 15: [57, 58], 16: [59, 60], 17: [61, 62],
                 18: [63, 64], 19: [65, 66], 20: [67, 68], 21: [69, 70], 22: [71, 72], 23: [73, 74],
                 24: [75, 76], 25: [77, 78], 26: [79, 80], 27: [81, 82], 28: [83, 84], 29: [85, 86],
                 30: [87, 88], 31: [89, 90], 32: [91, 92], 33: [93, 94], 34: [95, 96], 35: [97, 98],
                 36: [99, 100], 37: [101, 102], 38: [103, 104], 39: [105, 106], 40: [107, 108],
                 41: [109, 110], 42: [111, 112], 43: [113, 114], 44: [115, 116], 45: [117, 118],
                 46: [119, 120], 47: [121, 122], 48: [123, 124], 49: [125, 126], 50: [127, 128],
                 51: [129, 130], 52: [131, 132], 53: [133, 134], 54: [23, 69], 55: [69, 24],
                 56: [22, 44], 57: [44, 67], 58: [67, 46], 59: [46, 23], 60: [18, 65], 61: [65, 40],
                 62: [40, 42], 63: [42, 22], 64: [0, 61], 65: [61, 38], 66: [38, 63], 67: [63, 18],
                 68: [1, 57], 69: [57, 59], 70: [59, 36], 71: [36, 0], 72: [8, 55], 73: [55, 1],
                 74: [12, 49], 75: [49, 34], 76: [34, 51], 77: [51, 53], 78: [53, 8], 79: [13, 28],
                 80: [28, 47], 81: [47, 30], 82: [30, 12], 83: [2, 62], 84: [62, 83], 85: [83, 64],
                 86: [64, 85], 87: [85, 66], 88: [66, 87], 89: [87, 68], 90: [68, 89], 91: [89, 91],
                 92: [91, 70], 93: [70, 19], 94: [3, 58], 95: [58, 60], 96: [60, 2], 97: [9, 52],
                 98: [52, 79], 99: [79, 54], 100: [54, 56], 101: [56, 81], 102: [81, 3],
                 103: [14, 71], 104: [71, 73], 105: [73, 48], 106: [48, 75], 107: [75, 50],
                 108: [50, 77], 109: [77, 9], 110: [25, 90], 111: [90, 111], 112: [111, 92],
                 113: [92, 26], 114: [20, 88], 115: [88, 25], 116: [4, 105], 117: [105, 84],
                 118: [84, 86], 119: [86, 107], 120: [107, 109], 121: [109, 20], 122: [5, 82],
                 123: [82, 101], 124: [101, 103], 125: [103, 4], 126: [10, 76], 127: [76, 99],
                 128: [99, 78], 129: [78, 80], 130: [80, 5], 131: [15, 74], 132: [74, 10],
                 133: [6, 106], 134: [106, 125], 135: [125, 127], 136: [127, 108], 137: [108, 110],
                 138: [110, 129], 139: [129, 131], 140: [131, 133], 141: [133, 112], 142: [112, 21],
                 143: [7, 123], 144: [123, 102], 145: [102, 104], 146: [104, 6], 147: [11, 117],
                 148: [117, 119], 149: [119, 121], 150: [121, 7], 151: [16, 96], 152: [96, 115],
                 153: [115, 98], 154: [98, 100], 155: [100, 11], 156: [17, 113], 157: [113, 94],
                 158: [94, 16]}

throats_widths = {0: 6.59, 1: 15.00, 2: 6.67, 3: 7.76, 4: 10.00, 5: 9.00, 6: 9.00, 7: 6.59, 8: 5.94,
                  9: 9.00, 10: 9.00, 11: 15.00, 12: 15.00, 13: 9.00, 14: 6.67, 15: 9.00, 16: 6.59,
                  17: 9.00, 18: 13.00, 19: 6.77, 20: 9.00, 21: 6.79, 22: 9.00, 23: 9.00, 24: 6.79,
                  25: 15.00, 26: 9.00, 27: 6.67, 28: 6.58, 29: 9.06, 30: 9.00, 31: 9.00, 32: 9.00,
                  33: 9.00, 34: 8.50, 35: 9.00, 36: 6.67, 37: 6.00, 38: 10.00, 39: 9.00, 40: 6.77,
                  41: 10.00, 42: 9.00, 43: 8.50, 44: 6.79, 45: 5.94, 46: 9.00, 47: 6.00, 48: 6.59,
                  49: 9.06, 50: 9.00, 51: 6.00, 52: 6.67, 53: 15.00, 54: 6.50, 55: 6.50, 56: 10.00,
                  57: 10.00, 58: 10.00, 59: 10.00, 60: 8.80, 61: 8.80, 62: 8.80, 63: 8.80,
                  64: 10.00, 65: 10.00, 66: 10.00, 67: 10.00, 68: 13.33, 69: 13.33, 70: 13.33,
                  71: 13.33, 72: 6.50, 73: 6.50, 74: 10.60, 75: 10.60, 76: 10.60, 77: 10.60,
                  78: 10.60, 79: 10.83, 80: 10.83, 81: 10.83, 82: 10.83, 83: 6.50, 84: 6.50,
                  85: 6.50, 86: 6.50, 87: 6.50, 88: 6.50, 89: 6.50, 90: 6.50, 91: 6.50, 92: 6.50,
                  93: 6.50, 94: 7.84, 95: 7.84, 96: 7.84, 97: 8.80, 98: 8.80, 99: 8.80, 100: 8.80,
                  101: 8.80, 102: 8.80, 103: 6.33, 104: 6.33, 105: 6.33, 106: 6.33, 107: 6.33,
                  108: 6.33, 109: 6.33, 110: 7.00, 111: 7.00, 112: 7.00, 113: 7.00, 114: 9.00,
                  115: 9.00, 116: 6.50, 117: 6.50, 118: 6.50, 119: 6.50, 120: 6.50, 121: 6.50,
                  122: 6.04, 123: 6.04, 124: 6.04, 125: 6.04, 126: 6.50, 127: 6.50, 128: 6.50,
                  129: 6.50, 130: 6.50, 131: 6.47, 132: 6.47, 133: 5.55, 134: 5.55, 135: 5.55,
                  136: 5.55, 137: 5.55, 138: 5.55, 139: 5.55, 140: 5.55, 141: 5.55, 142: 5.55,
                  143: 6.50, 144: 6.50, 145: 6.50, 146: 6.50, 147: 7.84, 148: 7.84, 149: 7.84,
                  150: 7.84, 151: 6.50, 152: 6.50, 153: 6.50, 154: 6.50, 155: 6.50, 156: 12.75,
                  157: 12.75, 158: 12.75}

throats_depths = {0: 1, 1: 1, 2: 1, 3: 1, 4: 1, 5: 1, 6: 1, 7: 1, 8: 1, 9: 1, 10: 1, 11: 1, 12: 1,
                  13: 1, 14: 1, 15: 1, 16: 1, 17: 1, 18: 1, 19: 1, 20: 1, 21: 1, 22: 1, 23: 1,
                  24: 1, 25: 1, 26: 1, 27: 1, 28: 1, 29: 1, 30: 1, 31: 1, 32: 1, 33: 1, 34: 1,
                  35: 1, 36: 1, 37: 1, 38: 1, 39: 1, 40: 1, 41: 1, 42: 1, 43: 1, 44: 1, 45: 1,
                  46: 1, 47: 1, 48: 1, 49: 1, 50: 1, 51: 1, 52: 1, 53: 1, 54: 1, 55: 1, 56: 1,
                  57: 1, 58: 1, 59: 1, 60: 1, 61: 1, 62: 1, 63: 1, 64: 1, 65: 1, 66: 1, 67: 1,
                  68: 1, 69: 1, 70: 1, 71: 1, 72: 1, 73: 1, 74: 1, 75: 1, 76: 1, 77: 1, 78: 1,
                  79: 1, 80: 1, 81: 1, 82: 1, 83: 1, 84: 1, 85: 1, 86: 1, 87: 1, 88: 1, 89: 1,
                  90: 1, 91: 1, 92: 1, 93: 1, 94: 1, 95: 1, 96: 1, 97: 1, 98: 1, 99: 1, 100: 1,
                  101: 1, 102: 1, 103: 1, 104: 1, 105: 1, 106: 1, 107: 1, 108: 1, 109: 1, 110: 1,
                  111: 1, 112: 1, 113: 1, 114: 1, 115: 1, 116: 1, 117: 1, 118: 1, 119: 1, 120: 1,
                  121: 1, 122: 1, 123: 1, 124: 1, 125: 1, 126: 1, 127: 1, 128: 1, 129: 1, 130: 1,
                  131: 1, 132: 1, 133: 1, 134: 1, 135: 1, 136: 1, 137: 1, 138: 1, 139: 1, 140: 1,
                  141: 1, 142: 1, 143: 1, 144: 1, 145: 1, 146: 1, 147: 1, 148: 1, 149: 1, 150: 1,
                  151: 1, 152: 1, 153: 1, 154: 1, 155: 1, 156: 1, 157: 1, 158: 1}

inlet_pores = [27, 29, 31, 33, 35, 37, 39, 41, 43, 45]
outlet_pores = [114, 116, 118, 120, 128, 130, 132, 134]
inlet_throats = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
outlet_throats = [43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53]

voxel_size = 2.8e-6
for key in pores_coordinates.keys():
    pores_coordinates[key][0] = pores_coordinates[key][0] * voxel_size
    pores_coordinates[key][1] = pores_coordinates[key][1] * voxel_size

for key in throats_widths.keys():
    throats_widths[key] = throats_widths[key] * voxel_size

for key in throats_depths.keys():
    throats_depths[key] = throats_depths[key] * voxel_size

boundary_pores = {'inlet_pores': inlet_pores, 'outlet_pores': outlet_pores}
boundary_throats = {'inlet_throats': inlet_throats, 'outlet_throats': outlet_throats}

# be cautious, do not rewrite existing models
json_file_name = '../inOut/models/kunning_jing_viser_new.txt'
with open(json_file_name, 'w') as f:
    json.dump({'pores_coordinates': pores_coordinates, 'throats_pores': throats_pores,
               'throats_widths': throats_widths, 'throats_depths': throats_depths,
               'boundary_pores': boundary_pores, 'boundary_throats': boundary_throats},
              f, sort_keys=True, indent=4 * ' ', ensure_ascii=False)

# json_file_name = 'inOut/lbm_validation_fork.txt'
# with open(json_file_name) as f:
#     data = json.load(f)
#
# pores_coordinates = {int(key): value for key, value in data['pores_coordinates'].items()}
# throats_pores = {int(key): value for key, value in data['throats_pores'].items()}
# throats_widths = {int(key): value for key, value in data['throats_widths'].items()}
# throats_depths = {int(key): value for key, value in data['throats_depths'].items()}
#
# inlet_pores = set(data['boundary_pores']['inlet_pores'])
# outlet_pores = set(data['boundary_pores']['outlet_pores'])
# inlet_throats = set(data['boundary_throats']['inlet_throats'])
# outlet_throats = set(data['boundary_throats']['outlet_throats'])
